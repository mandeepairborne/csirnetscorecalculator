<!DOCTYPE html>
<html>
<head>
    <title>CSIR-NET Physics Score Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input[type="text"] {
            width: 70%;
            padding: 8px;
            margin-right: 10px;
        }
        button {
            padding: 8px 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            background: #f8f8f8;
            border-radius: 4px;
        }
        .score-section {
            margin: 10px 0;
            padding: 10px;
            background: #e8f4e8;
            border-left: 4px solid #4CAF50;
        }
        .part-breakdown {
            margin-top: 15px;
        }
        .error {
            color: #dc3545;
            background: #f8d7da;
            padding: 10px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CSIR-NET Physics Score Calculator</h1>
        <input type="text" id="responseUrl" 
               placeholder="Paste response sheet URL here">
        <button onclick="calculateScore()">Calculate Score</button>
        
        <div id="result"></div>
    </div>

    <script>
        // Complete Answer Key (Add all 75 entries)
        const CORRECT_ANSWERS = {
            "705101": "2",
    "705102": "4",
    "705103": "4",
    "705104": "1",
    "705105": "1",
    "705106": "2",
    "705107": "4",
    "705108": "2",
    "705109": "4",
    "705110": "1",
    "705111": "2",
    "705112": "3",
    "705113": "4",
    "705114": "1",
    "705115": "2",
    "705116": "4",
    "705117": "4",
    "705118": "2",
    "705119": "2",
    "705120": "2",
    "705121": "4",
    "705122": "3",
    "705123": "3",
    "705124": "2",
    "705125": "1",
    "705126": "2",
    "705127": "2",
    "705128": "3",
    "705129": "3",
    "705130": "2",
    "705131": "3",
    "705132": "1",
    "705133": "2",
    "705134": "2",
    "705135": "1",
    "705136": "3",
    "705137": "3",
    "705138": "4",
    "705139": "2",
    "705140": "4",
    "705141": "2",
    "705142": "2",
    "705143": "3",
    "705144": "4",
    "705145": "1",
    "705146": "4",
    "705147": "2",
    "705148": "1",
    "705149": "4",
    "705150": "3",
    "705151": "1",
    "705152": "4",
    "705153": "1",
    "705154": "1",
    "705155": "3",
    "705156": "4",
    "705157": "4",
    "705158": "3",
    "705159": "4",
    "705160": "4",
    "705161": "2",
    "705162": "4",
    "705163": "1",
    "705164": "4",
    "705165": "3",
    "705166": "3",
    "705167": "1",
    "705168": "1",
    "705169": "4",
    "705170": "1",
    "705171": "2",
    "705172": "4",
    "705173": "2",
    "705174": "1",
    "705175": "2"
        };

        async function calculateScore() {
            const urlInput = document.getElementById('responseUrl');
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = "Calculating...";
            
            try {
                // Validate URL
                const responseUrl = urlInput.value.trim();
                if (!responseUrl) throw new Error("Please enter a valid URL");
                
                // Fetch and parse response sheet
                const response = await fetch(responseUrl);
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Initialize counters
                let totalScore = 0;
                const partStats = {
                    A: { correct: 0, incorrect: 0, unattempted: 0, marks: 2, negative: 0.5 },
                    B: { correct: 0, incorrect: 0, unattempted: 0, marks: 3.5, negative: 0.875 },
                    C: { correct: 0, incorrect: 0, unattempted: 0, marks: 5, negative: 1.25 }
                };

                // Parse questions
                const questions = doc.querySelectorAll('table table table tr:has(td)');
                
                questions.forEach(question => {
                    const qidCell = question.querySelector('td:first-child');
                    if (!qidCell) return;
                    
                    // Extract Question ID
                    const qidMatch = qidCell.textContent.match(/705\d{3}/);
                    if (!qidMatch) return;
                    const qid = qidMatch[0];
                    
                    // Get correct answer
                    const correctAnswer = CORRECT_ANSWERS[qid];
                    if (!correctAnswer) return;
                    
                    // Determine part
                    const qNum = parseInt(qid.slice(4));
                    let part;
                    if (qNum >= 101 && qNum <= 120) part = 'A';
                    else if (qNum >= 121 && qNum <= 145) part = 'B';
                    else if (qNum >= 146 && qNum <= 175) part = 'C';
                    else return;

                    // Get user's answer
                    const selectedRadio = question.querySelector('input[type="radio"]:checked');
                    const userAnswer = selectedRadio 
                        ? selectedRadio.previousElementSibling?.textContent?.trim()
                        : null;

                    // Update scores
                    if (!userAnswer) {
                        partStats[part].unattempted++;
                    } else if (userAnswer === correctAnswer) {
                        partStats[part].correct++;
                        totalScore += partStats[part].marks;
                    } else {
                        partStats[part].incorrect++;
                        totalScore -= partStats[part].negative;
                    }
                });

                // Display results
                resultDiv.innerHTML = `
                    <div class="score-section">
                        <h3>Total Score: ${totalScore.toFixed(2)}</h3>
                        <div class="part-breakdown">
                            <h4>Part-wise Breakdown:</h4>
                            ${Object.entries(partStats).map(([part, stats]) => `
                                <p><strong>Part ${part
